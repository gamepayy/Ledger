{
    "swagger": "2.0",
    "info": {
        "description": "This API is used to manage the GP ledger. It is used to create, read, update and delete ledgers, to create, read, update and delete pending withdraws, and to create, read, update and delete tokens to the system.",
        "title": "GP API",
        "contact": {},
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api/v1",
    "paths": {
        "/token": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "summary": "Gets a token's data",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Token",
                        "name": "address",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/v1.Token"
                        }
                    },
                    "400": {
                        "description": "Bad request: no query found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Token not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/token/delete": {
            "delete": {
                "summary": "Deletes a token",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Token",
                        "name": "address",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "DB deletion success",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad request: error message",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/token/new": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "summary": "Creates a new token",
                "parameters": [
                    {
                        "description": "Token",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.Token"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "True",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    "400": {
                        "description": "Bad request: error message",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/token/update": {
            "put": {
                "produces": [
                    "application/json"
                ],
                "summary": "Updates a token's data",
                "parameters": [
                    {
                        "description": "Token",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.Token"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "True",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    "400": {
                        "description": "Bad request: error message",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/user": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "summary": "Gets an account's data",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Account",
                        "name": "account",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/v1.Ledger"
                        }
                    },
                    "400": {
                        "description": "Bad request: no query found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Account not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/user/delete": {
            "delete": {
                "produces": [
                    "application/json"
                ],
                "summary": "Deletes an account",
                "parameters": [
                    {
                        "description": "Account",
                        "name": "account",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Account successfully deleted",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/user/deposit": {
            "put": {
                "produces": [
                    "application/json"
                ],
                "summary": "Deposits an amount to an account",
                "parameters": [
                    {
                        "description": "Deposit details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.LedgerChangeRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/user/new": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "summary": "Creates a new account with a ledger",
                "parameters": [
                    {
                        "description": "Account details",
                        "name": "account",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.Ledger"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/v1.Ledger"
                        }
                    },
                    "400": {
                        "description": "Bad request: no body found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/user/transfer": {
            "put": {
                "produces": [
                    "application/json"
                ],
                "summary": "Transfers an amount from one account to another",
                "parameters": [
                    {
                        "description": "Transfer details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.TransferRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/user/withdraw": {
            "put": {
                "produces": [
                    "application/json"
                ],
                "summary": "Withdraws an amount from an account",
                "parameters": [
                    {
                        "description": "Withdraw details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.LedgerChangeRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/withdraws": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "summary": "Gets an account's withdraws data",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Account",
                        "name": "account",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/v1.Withdraw"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request: error message",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/withdraws/clean": {
            "delete": {
                "produces": [
                    "application/json"
                ],
                "summary": "Removes all finished withdraws from the database and adds them to the finished withdraws table",
                "responses": {
                    "200": {
                        "description": "True",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/withdraws/delete": {
            "delete": {
                "produces": [
                    "application/json"
                ],
                "summary": "Removes a pending withdraw from the database",
                "parameters": [
                    {
                        "description": "Withdraw",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.Withdraw"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "True",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    "400": {
                        "description": "Bad request: error message",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/withdraws/new": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "summary": "Inserts a pending withdraw into the database",
                "parameters": [
                    {
                        "description": "Withdraw",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.Withdraw"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "True",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    "400": {
                        "description": "Bad request: error message",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/withdraws/process": {
            "put": {
                "produces": [
                    "application/json"
                ],
                "summary": "Sets a pending withdraw to finished",
                "parameters": [
                    {
                        "description": "Withdraw",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/v1.Withdraw"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "True",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    "400": {
                        "description": "Bad request: error message",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal server error: error message",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "v1.Ledger": {
            "type": "object",
            "properties": {
                "account": {
                    "type": "string"
                },
                "balance": {
                    "type": "string"
                }
            }
        },
        "v1.LedgerChangeRequest": {
            "type": "object",
            "properties": {
                "account": {
                    "type": "string"
                },
                "amount": {
                    "type": "string"
                },
                "currency": {
                    "type": "string"
                }
            }
        },
        "v1.Token": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "decimals": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "symbol": {
                    "type": "string"
                }
            }
        },
        "v1.TransferRequest": {
            "type": "object",
            "properties": {
                "amount": {
                    "type": "string"
                },
                "currency": {
                    "type": "string"
                },
                "from": {
                    "type": "string"
                },
                "to": {
                    "type": "string"
                }
            }
        },
        "v1.Withdraw": {
            "type": "object",
            "properties": {
                "account": {
                    "type": "string"
                },
                "amount": {
                    "type": "string"
                },
                "issueTimestamp": {
                    "type": "string"
                },
                "pending": {
                    "type": "boolean"
                },
                "token": {
                    "type": "string"
                }
            }
        }
    }
}